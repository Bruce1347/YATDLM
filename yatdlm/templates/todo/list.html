{% extends 'todo/base.html' %}

{% block content %}
    {% csrf_token %}
    {% if not xhr %}
    <h1 style="text-align: center">{{ list.title }}</h1>

    <div style="max-width: 60%; margin: auto">
        <form>
            <h2>Ajouter une tâche :</h2>
            <label for="new_task_title">Titre :</label>
            <br>
            <br>
            <input type="text" id="new_task_title" style="width: 100%">
            <br>
            <br>
            <label for="new_task_descr">Description :</label>
            <br>
            <br>
            <textarea id="new_task_descr" rows="8" style="width: 100%"></textarea>
            <br>
            <br>
            <label for="new_task_due_date">Date de fin :</label>
            <input type="text" id="new_task_due_date" style="width: 100%">
            <br>
            <br>
            <button type="button" onclick="add_task('/todo/lists/{{ list.id }}/add_task');">Ajouter une nouvelle tâche</button>
        </form>
    </div>

    <div style="max-width: 80%; margin:auto;">
        <div id="list-container">
    {% endif %}
            <table style="border-collapse: collapse; width: 100%">
                <thead>
                    <th class="cell l-align">
                        Tâche
                    </th>
                    <th class="cell l-align">
                        Date de création
                    </th>
                    <th class="cell l-align">
                        Date d'échéance
                    </th>
                    <th class="cell">
                        Priorité
                    </th>
                    <th class="cell" style="background: #EEEEEE">
                        Complété
                    </th>
                    <th class="cell" style="background: #EEEEEE">
                    </th>
                </thead>
                <tbody>
                    {% for task in tasks %}
                        <tr>
                            <td class="cell l-align">
                                {{ task.title }}
                            </td>
                            <td class="cell l-align">
                                {{ task.creation_date|date:"d/m/Y — H:i" }}
                            </td>
                            <td class="cell l-align">
                                {{ task.due_date|date:"d/m/Y — H:i" }}
                            </td>
                            <td class="cell c-align">
                                {{ task.get_priority_display }}
                            </td>
                            <td class="pointer cell c-align" onclick="mark_task_as_done('/todo/lists/{{ list.id }}/complete_task/{{ task.id }}');">
                                {% if task.is_done %}
                                    &#10004;
                                {% else %}
                                    &#10008;
                                {% endif %}
                            </td>
                            <td class="pointer cell c-align" style="min-width: 30px;" onclick="del_task('/todo/lists/{{ list.id }}/del_task/{{ task.id }}');">
                                X
                            </td>
                        </tr>
                    {% endfor %}
    {% if not xhr %}
                </tbody>
            </table>
        </div>
    </div>
    {% endif %}
{% endblock %}